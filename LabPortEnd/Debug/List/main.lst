###############################################################################
#
# IAR ANSI C/C++ Compiler V8.30.1.114/W32 for ARM         30/Aug/2018  12:32:27
# Copyright 1999-2018 IAR Systems AB.
#
#    Cpu mode     =  thumb
#    Endian       =  little
#    Source file  =  E:\Projects\ARM_LAB\stm32Labs\LabPortEnd\main.cpp
#    Command line =  
#        -f C:\Users\Sergey\AppData\Local\Temp\EW1F1B.tmp
#        (E:\Projects\ARM_LAB\stm32Labs\LabPortEnd\main.cpp -lcN
#        E:\Projects\ARM_LAB\stm32Labs\LabPortEnd\Debug\List -lb
#        E:\Projects\ARM_LAB\stm32Labs\LabPortEnd\Debug\List -o
#        E:\Projects\ARM_LAB\stm32Labs\LabPortEnd\Debug\Obj --no_unroll
#        --no_inline --no_tbaa --no_scheduling --debug --endian=little
#        --cpu=Cortex-M4 -e --fpu=VFPv4_sp --dlib_config "D:\Program Files
#        (x86)\IAR Systems\Embedded Workbench
#        8.1\arm\inc\c\DLib_Config_Normal.h" -I
#        E:\Projects\ARM_LAB\stm32Labs\LabPortEnd\ -I
#        E:\Projects\ARM_LAB\stm32Labs\LabPortEnd\Application\ -I
#        E:\Projects\ARM_LAB\stm32Labs\LabPortEnd\Common\ -I
#        E:\Projects\ARM_LAB\stm32Labs\LabPortEnd\AHardware\ -I
#        E:\Projects\ARM_LAB\stm32Labs\LabPortEnd\AHardware\GpioPort\ -I
#        E:\Projects\ARM_LAB\stm32Labs\LabPortEnd\AHardware\IrqController\ -I
#        E:\Projects\ARM_LAB\stm32Labs\LabPortEnd\CMSIS\ -Om --c++
#        --no_exceptions --no_rtti)
#    Locale       =  C
#    List file    =  
#        E:\Projects\ARM_LAB\stm32Labs\LabPortEnd\Debug\List\main.lst
#    Object file  =  E:\Projects\ARM_LAB\stm32Labs\LabPortEnd\Debug\Obj\main.o
#
###############################################################################

E:\Projects\ARM_LAB\stm32Labs\LabPortEnd\main.cpp
      1          #include "CMSIS/stm32f411xe.h"
      2          #include "led1.hpp"
      3          #include "userbutton.hpp"
      4          
      5          extern "C" 
      6          {
      7            int __low_level_init(void) 
      8            {
      9              //Switch on external 16 MHz oscilator    
     10              RCC->CR |= RCC_CR_HSION;
     11              while ((RCC->CR & RCC_CR_HSIRDY) != RCC_CR_HSIRDY) 
     12              {
     13              }
     14              //Swicth system clock on extrenal oscilator
     15              RCC->CFGR |= RCC_CFGR_SW_HSI;
     16              while ((RCC->CFGR & RCC_CFGR_SWS) != RCC_CFGR_SWS_HSI) 
     17              {
     18              }
     19              //Swicth on clock on PortA and PortC 
     20              RCC->AHB1ENR |= (RCC_AHB1ENR_GPIOCEN | RCC_AHB1ENR_GPIOAEN);
     21              RCC->APB2ENR |= RCC_APB2ENR_SYSCFGEN ;
     22              //LED1 on PortA.5, set PortA.5 as output
     23              GPIOA->MODER |= GPIO_MODER_MODE5_0;
     24              //LED2 on PortC.9, LED3 on PortC.8, LED4 on PortC.5 set PortC.5,8,9 as output 
     25              GPIOC->MODER |= (GPIO_MODER_MODE9_0 | GPIO_MODER_MODE5_0 | GPIO_MODER_MODE8_0);
     26              //Enabled clock source on ADC1
     27              RCC->APB2ENR |= RCC_APB2ENR_ADC1EN;
     28              //Enable internal temperature sensor
     29              ADC->CCR |= ADC_CCR_TSVREFE;
     30              //Set flag End of Conversion after each refular channel conversion
     31              ADC1->CR2 |= ADC_CR2_EOCS;
     32              //Sample rate is 84 cycles for cahnnel 18 (Internal temperature sensor)
     33              ADC1->SMPR1 |= ADC_SMPR1_SMP18_2;
     34              //1 measurement of channel 18 (Internal temperature sensor)
     35              ADC1->SQR1 = ADC_SQR1_L_0;
     36              ADC1->SQR3 |= (ADC_SQR3_SQ1_1 | ADC_SQR3_SQ1_4);
     37              
     38              return 1;
     39            }
     40          }
     41          
     42          
     43          void Delay(tU32 duration)
     44          {
     45            for (tU32 i = 0; i < duration; i++)
     46            {    
     47            }
     48          }
     49          
     50          int main()
     51          {
     52            using utils::operator""msec;
     53              
     54            for(;;)
     55            {
     56              if (UserButton::GetInstance().IsPressed())
     57              {
     58                Led1::GetInstance().Toggle();         
     59              } 
     60              Delay(250msec);
     61            }
     62            return 0;
     63          }

   Maximum stack usage in bytes:

   .cstack Function
   ------- --------
       0   Delay(tU32)
       8   GpioPort<GPIO_TypeDef, 13UL>::GetState()
         8   -> utils::checkBit<uint32_t volatile, tU32>(uint32_t const volatile &, tU32)
       0   GpioPort<GPIO_TypeDef, 13UL>::GpioPort(GPIO_TypeDef &)
       0   GpioPort<GPIO_TypeDef, 13UL>::subobject GpioPort(GPIO_TypeDef &)
         0   -> GpioPort<GPIO_TypeDef, 13UL>::GpioPort(GPIO_TypeDef &)
       0   GpioPort<GPIO_TypeDef, 5UL>::GpioPort(GPIO_TypeDef &)
       0   GpioPort<GPIO_TypeDef, 5UL>::Toggle()
         0   -> utils::toggleBit<uint32_t volatile, tU32>(uint32_t volatile &, tU32)
       0   GpioPort<GPIO_TypeDef, 5UL>::subobject GpioPort(GPIO_TypeDef &)
         0   -> GpioPort<GPIO_TypeDef, 5UL>::GpioPort(GPIO_TypeDef &)
       8   GpioPortA<5UL>::GpioPortA()
         8   -> GpioPort<GPIO_TypeDef, 5UL>::subobject GpioPort(GPIO_TypeDef &)
       0   GpioPortA<5UL>::subobject GpioPortA()
         0   -> GpioPortA<5UL>::GpioPortA()
       8   GpioPortC<13UL>::GpioPortC()
         8   -> GpioPort<GPIO_TypeDef, 13UL>::subobject GpioPort(GPIO_TypeDef &)
       0   GpioPortC<13UL>::subobject GpioPortC()
         0   -> GpioPortC<13UL>::GpioPortC()
       8   Led1::Led1()
         8   -> GpioPortA<5UL>::subobject GpioPortA()
       8   Singleton<Led1>::GetInstance()
         8   -> Led1::Led1()
       8   Singleton<UserButton>::GetInstance()
         8   -> UserButton::UserButton()
       0   UserButton::IsPressed()
         0   -> GpioPort<GPIO_TypeDef, 13UL>::GetState()
       8   UserButton::UserButton()
         8   -> GpioPortC<13UL>::subobject GpioPortC()
       0   __low_level_init
       8   main
         8   -> Delay(tU32)
         8   -> GpioPort<GPIO_TypeDef, 5UL>::Toggle()
         8   -> Singleton<Led1>::GetInstance()
         8   -> Singleton<UserButton>::GetInstance()
         8   -> UserButton::IsPressed()
      16   utils::checkBit<uint32_t volatile, tU32>(uint32_t const volatile &, tU32)
        16   -> __aeabi_assert
        16   -> __iar_EmptyStepPoint
      16   utils::toggleBit<uint32_t volatile, tU32>(uint32_t volatile &, tU32)
        16   -> __aeabi_assert
        16   -> __iar_EmptyStepPoint


   Section sizes:

   Bytes  Function/Label
   -----  --------------
       4  ??DataTable1
       4  ??DataTable1_1
       4  ??DataTable1_2
       4  ??DataTable1_3
       4  ??DataTable1_4
       4  ??DataTable1_5
      12  Delay(tU32)
      20  GpioPort<GPIO_TypeDef, 13UL>::GetState()
       4  GpioPort<GPIO_TypeDef, 13UL>::GpioPort(GPIO_TypeDef &)
       4  GpioPort<GPIO_TypeDef, 13UL>::subobject GpioPort(GPIO_TypeDef &)
       4  GpioPort<GPIO_TypeDef, 5UL>::GpioPort(GPIO_TypeDef &)
      10  GpioPort<GPIO_TypeDef, 5UL>::Toggle()
       4  GpioPort<GPIO_TypeDef, 5UL>::subobject GpioPort(GPIO_TypeDef &)
      20  GpioPortA<5UL>::GpioPortA()
       4  GpioPortA<5UL>::subobject GpioPortA()
      20  GpioPortC<13UL>::GpioPortC()
       4  GpioPortC<13UL>::subobject GpioPortC()
      12  Led1::Led1()
      36  Singleton<Led1>::GetInstance()
      36  Singleton<UserButton>::GetInstance()
       4  UserButton::IsPressed()
      12  UserButton::UserButton()
     122  __low_level_init
       4  instance
       4  instance
      30  main
      44  utils::checkBit<uint32_t volatile, tU32>(uint32_t const volatile &, tU32)
      48  utils::toggleBit<uint32_t volatile, tU32>(uint32_t volatile &, tU32)
     170  -- Other

 
  10 bytes in section .bss
 168 bytes in section .rodata
 474 bytes in section .text
 
 188 bytes of CODE  memory (+ 286 bytes shared)
   0 bytes of CONST memory (+ 168 bytes shared)
   0 bytes of DATA  memory (+  10 bytes shared)

Errors: none
Warnings: 1
